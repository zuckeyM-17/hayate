<% content_for(:page_title) { 'Books' } %>

<main class="container">
  <%= render 'shared/breadcrumb' %>
  <div class="p-4">
    <%= render 'shared/header', title: 'Readings' %>

    <div class="pt-4">
      <table class="border border-slate-500 table-auto">
        <thead>
          <tr>
            <th class="border border-slate-600 px-2 py-1">Book</th>
            <th class="border border-slate-600 px-2 py-1">Category</th>
            <th class="border border-slate-600 px-2 py-1">Chapter</th>
            <th class="border border-slate-600 px-2 py-1">Note</th>
          </tr>
        </thead>
        <tbody>
          <% @readings.each do |r| %>
            <tr>
              <td class="border border-slate-600 px-2 py-1"><%= r.chapter.book.title %></td>
              <td class="border border-slate-600 px-2 py-1"><%= book_category(r.chapter.book.category) %></td>
              <td class="border border-slate-600 px-2 py-1"><%= r.chapter.title %></td>
              <td class="border border-slate-600 px-2 py-1 underline"><%= link_to 'note', reading_path(r) %></td>
            </tr>
          <% end%>
        </tbody>
      </table>
    </div>

    <div class="pt-4">
      <%= render 'shared/header', title: 'Books' %>
      <div class="pt-4">
        <%= link_to "New",
                new_book_path,
                class: "bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" %>

        <div class="pt-4">
          <%= paginate @books %>
          <table class="border border-slate-500 table-auto">
            <thead>
              <tr>
                <th class="border border-slate-600 px-2 py-1">Title</th>
                <th class="border border-slate-600 px-2 py-1">Category</th>
              </tr>
            </thead>
            <tbody>
              <% @books.each do |b| %>
                <tr>
                  <td class="border border-slate-600 px-2 py-1 underline">
                    <% if b.in_progress? %>
                     <span class="px-2">ðŸ“–</span>
                    <% end %>
                    <%= link_to b.title, book_path(b.id) %>
                  </td>
                  <td class="border border-slate-600 px-2 py-1"><%= book_category(b.category) %></td>
                </tr>
              <% end%>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</main>